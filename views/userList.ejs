<%- include("partials/header.ejs") %>

<nav class="navbar fixed-top py-3 navbar-expand-lg">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1 mx-4 noto" href="#">
            <img src="/images/favicon.ico" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
            The Book Vault
        </span>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link active mx-4 sans" aria-current="page" href="/userPageFromUserList">Home</a>
                <form action="/userList" method="post">
                    <input type="text" name="userName" value = "<%= userName %>" id="" hidden>
                    <button class="btn btn-primary mx-2 sans" href="/userList">My List</a>
                </form>
                
            </div>
        </div>
    </div>
</nav>
<div class="row mt-5 pt-5 bgimg">

    <div class="col-sm-12 col-md-6 col-lg-6 d-flex justify-content-center align-items-center">
        <h2 class="ps-4 noto">Hi <%= userName %>. <br> Here you can find your saved books !!! </h2>
    </div>

</div>

<div class="mainBody px-4">

    <div class="findBook my-5 py-5 px-5" id="findbook">
        <h1 class="noto text-center mb-5">Your List</h1>
        <div class="row">
        <% if(data[0]){ %>
                <% data.forEach(element => { %>
                    <div class="col-sm-12 col-md-6 col-lg-4 my-3 d-flex align-items-stretch reveal1">
                        <div class="card text-center">
                            <img class="mx-auto mt-4"
                                src="<%= element.imgurl %>"
                                alt="...">
                            <div class="card-body">
                                <h5 class="card-title noto text-center "><%= element.bookName %></h5>
                                <p class="card-text sans text-center "><%= element.subName %></p>
                                <p class="card-text sans text-center ">Author : <%= element.author %></p>
                                <a class="btn btn-primary mx-2 sans" href="<%= element.readurl%>" target="_blank">Read Online</a> <br><br>
                                <form action="/removeFromList" method="post">
                                    <input type="text" name="userEmail" value = "<%= userEmail %>" id="" hidden>
                                    
                                    <input type="text" name="bookName" value = "<%= element.bookName %>" id="" hidden>

                                    <button type="submit" class="btn btn-primary btn-size">Remove From List</button>
                                </form>                        
                            </div>
                        </div>
                    </div>
              <%  }); %>
        </div>
            <% }else{ %>
                <div class="alert alert-danger" role="alert">
                    You have not saved any books
                  </div>
                

                <% } %>
    </div>
</div>


<%- include("partials/footer.ejs") %>